<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOVIA BOTIQUE - Fashion Shoes, Dresses & T-shirts</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { 
            getFirestore, 
            collection, 
            getDocs, 
            addDoc,
            serverTimestamp 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC4MHkpXUrnnQiaB4ru9q5CvJoQMwJRv1g",
            authDomain: "aj-shop-e10b7.firebaseapp.com",
            projectId: "aj-shop-e10b7",
            storageBucket: "aj-shop-e10b7.firebasestorage.app",
            messagingSenderId: "259849089139",
            appId: "1:259849089139:web:7cee95b18d5e0c90103a06",
            measurementId: "G-4YZQPLNR3F"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Make Firestore functions available globally
        window.firestore = {
            db,
            getDocs,
            collection,
            addDoc,
            serverTimestamp
        };
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        /* Header Styles */
        .header {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .header.minimized {
            padding: 8px 0;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, #2E8B57, #3CB371);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            transition: all 0.3s ease;
        }

        .header.minimized .logo {
            font-size: 1.4rem;
        }

        .logo-icon {
            font-size: 1.5em;
        }

        .search-section {
            display: flex;
            gap: 12px;
            flex: 1;
            max-width: 600px;
            align-items: center;
            position: relative;
        }

        .search-bar {
            flex: 1;
            padding: 12px 20px 12px 45px;
            border: 2px solid #e2e8f0;
            border-radius: 50px;
            font-size: 15px;
            transition: all 0.3s ease;
            background: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .search-bar:focus {
            outline: none;
            border-color: #2E8B57;
            box-shadow: 0 0 0 3px rgba(46, 139, 87, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 18px;
            color: #a0aec0;
            font-size: 16px;
        }

        .category-filter {
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 50px;
            font-size: 15px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            padding-right: 35px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .category-filter:focus {
            outline: none;
            border-color: #2E8B57;
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .cart-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #2E8B57, #3CB371);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 4px 12px rgba(46, 139, 87, 0.2);
        }

        .cart-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(46, 139, 87, 0.3);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .wishlist-btn {
            background: none;
            border: none;
            color: #4a5568;
            font-size: 20px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }

        .wishlist-btn:hover {
            color: #dc3545;
        }

        .wishlist-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        /* Mobile-specific styles */
        .mobile-header {
            display: none;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .mobile-header.minimized {
            padding: 6px 0;
        }

        .mobile-header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .mobile-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.4rem;
            font-weight: 700;
            background: linear-gradient(135deg, #2E8B57, #3CB371);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            transition: all 0.3s ease;
        }

        .mobile-header.minimized .mobile-logo {
            font-size: 1.2rem;
        }

        .mobile-logo-icon {
            font-size: 1.2em;
        }

        .mobile-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .mobile-search-btn, .mobile-cart-btn {
            background: none;
            border: none;
            color: #4a5568;
            font-size: 20px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mobile-search-btn:hover, .mobile-cart-btn:hover {
            background: #f8f9fa;
        }

        .mobile-cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #dc3545;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        .mobile-search-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .mobile-search-overlay.active {
            display: flex;
            opacity: 1;
        }

        .mobile-search-container {
            background: white;
            width: 90%;
            max-width: 500px;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .mobile-search-overlay.active .mobile-search-container {
            transform: translateY(0);
        }

        .mobile-search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .mobile-search-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2d3748;
        }

        .close-search {
            background: none;
            border: none;
            font-size: 20px;
            color: #6c757d;
            cursor: pointer;
            transition: color 0.2s ease;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-search:hover {
            background: #f8f9fa;
            color: #dc3545;
        }

        .mobile-search-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .mobile-search-input:focus {
            outline: none;
            border-color: #2E8B57;
            box-shadow: 0 0 0 3px rgba(46, 139, 87, 0.1);
            background: white;
        }

        .mobile-cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 2000;
            display: none;
            flex-direction: column;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .mobile-cart-overlay.active {
            display: flex;
            opacity: 1;
        }

        .mobile-cart-header {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            padding: 15px 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .mobile-cart-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 20px;
            color: #6c757d;
            cursor: pointer;
            transition: color 0.2s ease;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-cart:hover {
            background: #f8f9fa;
            color: #dc3545;
        }

        .mobile-cart-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        /* Enhanced Banner Section */
        .banner {
            position: relative;
            height: 500px;
            margin: 20px auto;
            max-width: 1400px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            background: linear-gradient(135deg, rgba(46, 139, 87, 0.9), rgba(60, 179, 113, 0.8));
        }

        .banner-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .banner-slide.active {
            opacity: 1;
        }

        .banner-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: 1;
        }

        .banner-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
            max-width: 800px;
            padding: 0 20px;
        }

        .banner h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .typing-text {
            border-right: 3px solid white;
            white-space: nowrap;
            overflow: hidden;
            display: inline-block;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { border-color: white; }
            50% { border-color: transparent; }
        }

        .banner p {
            font-size: 1.3rem;
            margin-bottom: 30px;
            opacity: 0.9;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .banner-btn {
            background: white;
            color: #2E8B57;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .banner-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 255, 255, 0.2);
        }

        .banner-indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 2;
        }

        .banner-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .banner-indicator.active {
            background: white;
            transform: scale(1.2);
        }

        /* Banner Fashion Images */
        .fashion-image {
            position: absolute;
            z-index: 1;
            opacity: 0.8;
            transition: all 0.5s ease;
        }

        .fashion-image.shoes {
            bottom: 10%;
            right: 5%;
            width: 300px;
            height: 200px;
            background: url('https://images.unsplash.com/photo-1542291026-7eec264c27ff?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80') no-repeat center center;
            background-size: contain;
        }

        .fashion-image.dress {
            top: 10%;
            left: 5%;
            width: 250px;
            height: 350px;
            background: url('https://images.unsplash.com/photo-1595777457583-95e059d581b8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80') no-repeat center center;
            background-size: contain;
        }

        .fashion-image.tshirt {
            bottom: 15%;
            left: 10%;
            width: 280px;
            height: 280px;
            background: url('https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80') no-repeat center center;
            background-size: contain;
        }

        .fashion-image.canvas {
            top: 20%;
            right: 10%;
            width: 320px;
            height: 200px;
            background: url('https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80') no-repeat center center;
            background-size: contain;
        }

        .banner-slide:hover .fashion-image {
            opacity: 0.9;
            transform: scale(1.05);
        }

        /* Main Container */
        .main-container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
        }

        .products-section {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .products-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .section-title {
            font-size: 1.5rem;
            color: #2d3748;
            font-weight: 600;
        }

        .sort-filter {
            padding: 10px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }

        .product-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .product-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: #28a745;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 1;
        }

        .product-badge.sale {
            background: linear-gradient(135deg, #dc3545, #c82333);
        }

        .product-badge.new {
            background: linear-gradient(135deg, #007bff, #0056b3);
        }

        .product-badge.limited {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
        }

        .wishlist-icon {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(255, 255, 255, 0.9);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1;
            border: none;
            font-size: 16px;
        }

        .wishlist-icon:hover {
            color: #dc3545;
            background: white;
            transform: scale(1.1);
        }

        .wishlist-icon.active {
            color: #dc3545;
            background: white;
        }

        .product-image-container {
            position: relative;
            width: 100%;
            padding-top: 100%;
            overflow: hidden;
            background: #f8f9fa;
        }

        .product-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        .product-info {
            padding: 20px;
        }

        .product-info h3 {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #2d3748;
            font-weight: 600;
            line-height: 1.4;
            height: 2.8em;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .product-category {
            font-size: 13px;
            color: #6c757d;
            margin-bottom: 10px;
            display: inline-block;
            background: #f8f9fa;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 500;
        }

        .product-details {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
            font-size: 13px;
            color: #6c757d;
        }

        .product-details span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .current-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: #28a745;
        }

        .original-price {
            font-size: 1rem;
            color: #6c757d;
            text-decoration: line-through;
        }

        .discount-badge {
            background: #dc3545;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .product-stock {
            font-size: 14px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .product-stock.in-stock {
            color: #28a745;
        }

        .product-stock.low-stock {
            color: #ffc107;
        }

        .product-stock.out-of-stock {
            color: #dc3545;
        }

        .add-to-cart {
            width: 100%;
            background: linear-gradient(135deg, #2E8B57, #3CB371);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 15px;
        }

        .add-to-cart:hover {
            background: linear-gradient(135deg, #1f6e42, #2E8B57);
            box-shadow: 0 4px 12px rgba(46, 139, 87, 0.3);
            transform: translateY(-2px);
        }

        .add-to-cart:disabled {
            background: #6c757d;
            color: #adb5bd;
            cursor: not-allowed;
            transform: none;
        }

        .add-to-cart:disabled:hover {
            box-shadow: none;
            transform: none;
        }

        /* Cart Sidebar */
        .cart-sidebar {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            height: fit-content;
            position: sticky;
            top: 100px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .cart-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
        }

        .clear-cart {
            background: none;
            border: none;
            color: #dc3545;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: color 0.3s ease;
        }

        .clear-cart:hover {
            color: #c82333;
        }

        .cart-items {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
            scrollbar-width: thin;
            scrollbar-color: #ced4da #f8f9fa;
        }

        .cart-items::-webkit-scrollbar {
            width: 6px;
        }

        .cart-items::-webkit-scrollbar-track {
            background: #f8f9fa;
            border-radius: 3px;
        }

        .cart-items::-webkit-scrollbar-thumb {
            background-color: #ced4da;
            border-radius: 3px;
        }

        .cart-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .cart-item-info {
            flex: 1;
            min-width: 0;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #2d3748;
        }

        .cart-item-price {
            color: #28a745;
            font-weight: 600;
            font-size: 15px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 8px;
        }

        .quantity-btn {
            background: #f8f9fa;
            color: #495057;
            border: 1px solid #dee2e6;
            width: 28px;
            height: 28px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .quantity-btn:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }

        .quantity-btn:active {
            transform: scale(0.95);
        }

        .remove-item {
            background: none;
            border: none;
            color: #dc3545;
            font-size: 14px;
            cursor: pointer;
            margin-left: 8px;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: color 0.3s ease;
        }

        .remove-item:hover {
            color: #c82333;
        }

        .cart-summary {
            margin-top: 20px;
            border-top: 1px solid #e9ecef;
            padding-top: 20px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            color: #495057;
            font-size: 15px;
        }

        .summary-row.total {
            font-weight: 600;
            color: #2d3748;
            font-size: 1.2rem;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #e9ecef;
        }

        .total-amount {
            color: #28a745;
            font-weight: 700;
        }

        .checkout-btn {
            width: 100%;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .checkout-btn:hover {
            background: linear-gradient(135deg, #218838, #1ea085);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
            transform: translateY(-2px);
        }

        .checkout-btn:disabled {
            background: #6c757d;
            color: #adb5bd;
            cursor: not-allowed;
            transform: none;
        }

        .checkout-btn:disabled:hover {
            box-shadow: none;
            transform: none;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: transform 0.3s ease;
            position: relative;
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 20px;
            color: #6c757d;
            cursor: pointer;
            transition: color 0.2s ease;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-modal:hover {
            background: #f8f9fa;
            color: #dc3545;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 1.5rem;
            color: #2d3748;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .modal-subtitle {
            color: #6c757d;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
            font-size: 14px;
        }

        .form-control {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .form-control:focus {
            outline: none;
            border-color: #2E8B57;
            box-shadow: 0 0 0 3px rgba(46, 139, 87, 0.1);
            background: white;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
            margin-top: 25px;
        }

        .modal-btn {
            flex: 1;
            padding: 14px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 15px;
            border: none;
        }

        .btn-cancel {
            background: #f8f9fa;
            color: #495057;
            border: 2px solid #e9ecef;
        }

        .btn-cancel:hover {
            background: #e9ecef;
            border-color: #dee2e6;
        }

        .btn-confirm {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .btn-confirm:hover {
            background: linear-gradient(135deg, #218838, #1ea085);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }

        /* Success Modal */
        .success-modal .modal-content {
            text-align: center;
            padding: 40px 30px;
        }

        .success-icon {
            font-size: 64px;
            color: #28a745;
            margin-bottom: 20px;
        }

        .success-title {
            font-size: 1.5rem;
            color: #2d3748;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .success-message {
            color: #6c757d;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .order-details {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            text-align: left;
        }

        .order-details-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: #495057;
            font-size: 16px;
        }

        .order-details-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .order-details-item:last-child {
            margin-bottom: 0;
        }

        .order-details-label {
            color: #6c757d;
        }

        .order-details-value {
            font-weight: 500;
            color: #495057;
        }

        .btn-continue {
            width: 100%;
            background: linear-gradient(135deg, #2E8B57, #3CB371);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-continue:hover {
            background: linear-gradient(135deg, #1f6e42, #2E8B57);
            box-shadow: 0 4px 12px rgba(46, 139, 87, 0.3);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 16px 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 3000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
            max-width: 350px;
            border-left: 4px solid #28a745;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-icon {
            font-size: 20px;
        }

        .toast-success .toast-icon {
            color: #28a745;
        }

        .toast-error {
            border-left-color: #dc3545;
        }

        .toast-error .toast-icon {
            color: #dc3545;
        }

        .toast-info {
            border-left-color: #17a2b8;
        }

        .toast-info .toast-icon {
            color: #17a2b8;
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: #2d3748;
            font-size: 14px;
        }

        .toast-message {
            font-size: 13px;
            color: #6c757d;
        }

        .close-toast {
            background: none;
            border: none;
            color: #6c757d;
            cursor: pointer;
            font-size: 16px;
            transition: color 0.2s ease;
        }

        .close-toast:hover {
            color: #495057;
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Mobile Responsive */
        @media (max-width: 1024px) {
            .header {
                display: none;
            }
            
            .mobile-header {
                display: block;
            }
            
            .main-container {
                grid-template-columns: 1fr;
            }
            
            .cart-sidebar {
                display: none;
            }
            
            .fashion-image {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .modal-content {
                padding: 25px 20px;
                margin: 20px;
            }
            
            .modal-actions {
                flex-direction: column;
            }
            
            .banner {
                height: 400px;
            }
            
            .banner h1 {
                font-size: 2rem;
            }
            
            .banner p {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 480px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .product-card {
                max-width: 100%;
            }
            
            .banner {
                height: 350px;
            }
            
            .banner h1 {
                font-size: 1.8rem;
            }
            
            .banner p {
                font-size: 1rem;
            }
            
            .banner-btn {
                padding: 12px 24px;
                font-size: 1rem;
            }
        }

        /* Utility Classes */
        .text-ugx {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }

        .currency-symbol {
            font-size: 0.9em;
            margin-right: 2px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #2E8B57;
        }

        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(46, 139, 87, 0.2);
            border-top: 4px solid #2E8B57;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <!-- Desktop Header -->
    <header class="header" id="desktopHeader">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-tshirt logo-icon"></i>
                <span>MOVIA BOTIQUE</span>
            </div>
            
            <div class="search-section">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="searchBar" class="search-bar" placeholder="Search for fashion products...">
                <select id="categoryFilter" class="category-filter">
                    <option value="">All Categories</option>
                    <option value="Shoes">Shoes</option>
                    <option value="Dresses">Dresses</option>
                    <option value="T-shirts">T-shirts</option>
                    <option value="Casual Wear">Casual Wear</option>
                    <option value="Accessories">Accessories</option>
                </select>
            </div>
            
            <div class="header-actions">
                <button class="wishlist-btn" onclick="toggleWishlist()">
                    <i class="far fa-heart"></i>
                    <span class="wishlist-count" id="wishlistCount">0</span>
                </button>
                <button class="cart-toggle" onclick="toggleCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Cart</span>
                    <span class="cart-count" id="cartCount">0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Mobile Header -->
    <div class="mobile-header" id="mobileHeader">
        <div class="mobile-header-content">
            <div class="mobile-logo">
                <i class="fas fa-tshirt mobile-logo-icon"></i>
                <span>MOVIA BOTIQUE</span>
            </div>
            
            <div class="mobile-actions">
                <button class="mobile-search-btn" onclick="openMobileSearch()">
                    <i class="fas fa-search"></i>
                </button>
                <button class="mobile-cart-btn" onclick="openMobileCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="mobile-cart-count" id="mobileCartCount">0</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Search Overlay -->
    <div class="mobile-search-overlay" id="mobileSearchOverlay">
        <div class="mobile-search-container">
            <div class="mobile-search-header">
                <h3 class="mobile-search-title">Search Products</h3>
                <button class="close-search" onclick="closeMobileSearch()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <input type="text" id="mobileSearchBar" class="mobile-search-input" placeholder="Search for fashion products...">
        </div>
    </div>

    <!-- Mobile Cart Overlay -->
    <div class="mobile-cart-overlay" id="mobileCartOverlay">
        <div class="mobile-cart-header">
            <h3 class="mobile-cart-title">Shopping Cart</h3>
            <button class="close-cart" onclick="closeMobileCart()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="mobile-cart-content">
            <div id="mobileCartItems" class="cart-items">
                <div class="empty-cart">
                    <p>Your cart is empty</p>
                    <p style="font-size: 14px; color: #6c757d; margin-top: 10px;">Add some products to get started!</p>
                </div>
            </div>
            
            <div class="cart-summary">
                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span class="text-ugx"><span class="currency-symbol">UGX</span> <span id="mobileCartSubtotal">0</span></span>
                </div>
                <div class="summary-row">
                    <span>Shipping:</span>
                    <span style="color: #28a745; font-weight: 600;">Free (agreed on contact)</span>
                </div>
                <div class="summary-row total">
                    <span>Total:</span>
                    <span class="total-amount text-ugx"><span class="currency-symbol">UGX</span> <span id="mobileCartTotal">0</span></span>
                </div>
            </div>
            
            <button class="checkout-btn" id="mobileCheckoutBtn" onclick="openCheckout()" disabled>
                <i class="fas fa-credit-card"></i>
                <span>Proceed to Checkout</span>
            </button>
        </div>
    </div>

    <!-- Enhanced Banner -->
    <section class="banner">
        <div class="banner-slide active" id="slide1">
            <div class="fashion-image shoes"></div>
            <div class="fashion-image dress"></div>
            <div class="banner-overlay"></div>
            <div class="banner-content">
                <h1><span class="typing-text" id="typingText"></span></h1>
                <p>Discover the latest trends in fashion with our premium collection</p>
                <a href="#new-arrivals" class="banner-btn">
                    <i class="fas fa-shopping-bag"></i>
                    Shop New Arrivals
                </a>
            </div>
        </div>
        
        <div class="banner-slide" id="slide2">
            <div class="fashion-image canvas"></div>
            <div class="fashion-image tshirt"></div>
            <div class="banner-overlay"></div>
            <div class="banner-content">
                <h1>Trendy Fashion Shoes</h1>
                <p>Step out in style with our collection of premium shoes for every occasion</p>
                <a href="#shoes" class="banner-btn">
                    <i class="fas fa-shoe-prints"></i>
                    Shop Shoes
                </a>
            </div>
        </div>
        
        <div class="banner-slide" id="slide3">
            <div class="fashion-image dress"></div>
            <div class="fashion-image tshirt"></div>
            <div class="banner-overlay"></div>
            <div class="banner-content">
                <h1>Elegant Dresses & T-shirts</h1>
                <p>Express your unique style with our fashionable dresses and t-shirts</p>
                <a href="#dresses" class="banner-btn">
                    <i class="fas fa-tshirt"></i>
                    Shop Dresses & T-shirts
                </a>
            </div>
        </div>
        
        <div class="banner-slide" id="slide4">
            <div class="fashion-image shoes"></div>
            <div class="fashion-image canvas"></div>
            <div class="banner-overlay"></div>
            <div class="banner-content">
                <h1>Casual Wear Collection</h1>
                <p>Comfort meets style in our premium casual wear collection</p>
                <a href="#casual" class="banner-btn">
                    <i class="fas fa-user"></i>
                    Shop Casual Wear
                </a>
            </div>
        </div>
        
        <div class="banner-indicators">
            <div class="banner-indicator active" onclick="goToSlide(0)"></div>
            <div class="banner-indicator" onclick="goToSlide(1)"></div>
            <div class="banner-indicator" onclick="goToSlide(2)"></div>
            <div class="banner-indicator" onclick="goToSlide(3)"></div>
        </div>
    </section>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Products Section -->
        <div class="products-section">
            <div class="products-header">
                <h2 class="section-title">Fashion Collection</h2>
                <div>
                    <select id="sortFilter" class="sort-filter" onchange="sortProducts()">
                        <option value="default">Sort by</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="name-asc">Name: A to Z</option>
                        <option value="name-desc">Name: Z to A</option>
                        <option value="newest">Newest First</option>
                    </select>
                </div>
            </div>
            <div id="productsCount" style="color: #6c757d; font-size: 14px; margin-bottom: 20px;">Loading products...</div>
            <div id="productsGrid" class="products-grid">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>Loading fashion products from database...</p>
                </div>
            </div>
        </div>

        <!-- Cart Sidebar -->
        <div class="cart-sidebar" id="cartSidebar">
            <div class="cart-header">
                <h3 class="cart-title">Shopping Cart</h3>
                <button class="clear-cart" onclick="clearCart()">
                    <i class="fas fa-trash-alt"></i>
                    <span>Clear</span>
                </button>
            </div>
            
            <div id="cartItems" class="cart-items">
                <div class="empty-cart">
                    <p>Your cart is empty</p>
                    <p style="font-size: 14px; color: #6c757d; margin-top: 10px;">Add some products to get started!</p>
                </div>
            </div>
            
            <div class="cart-summary">
                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span class="text-ugx"><span class="currency-symbol">UGX</span> <span id="cartSubtotal">0</span></span>
                </div>
                <div class="summary-row">
                    <span>Shipping:</span>
                    <span style="color: #28a745; font-weight: 600;">Free (agreed on contact)</span>
                </div>
                <div class="summary-row total">
                    <span>Total:</span>
                    <span class="total-amount text-ugx"><span class="currency-symbol">UGX</span> <span id="cartTotal">0</span></span>
                </div>
            </div>
            
            <button class="checkout-btn" id="checkoutBtn" onclick="openCheckout()" disabled>
                <i class="fas fa-credit-card"></i>
                <span>Proceed to Checkout</span>
            </button>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="modal" id="checkoutModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeCheckout()">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <h2 class="modal-title">Complete Your Order</h2>
                <p class="modal-subtitle">Please fill in your details to complete the purchase</p>
                <p style="color: #28a745; font-size: 14px; margin-top: 10px;">
                    <i class="fas fa-truck"></i> Shipping fee will be agreed on contact after order verification
                </p>
            </div>
            
            <form id="checkoutForm">
                <div class="form-group">
                    <label for="customerName" class="form-label">Full Name *</label>
                    <input type="text" id="customerName" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="email" class="form-label">Email Address *</label>
                    <input type="email" id="email" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="phone" class="form-label">Phone Number *</label>
                    <input type="tel" id="phone" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="address" class="form-label">Delivery Address *</label>
                    <textarea id="address" class="form-control form-textarea" rows="3" required placeholder="Street address, city, postal code"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="paymentMethod" class="form-label">Payment Method *</label>
                    <select id="paymentMethod" class="form-control" required>
                        <option value="">Select payment method</option>
                        <option value="mobile-money">Mobile Money</option>
                        <option value="bank-transfer">Bank Transfer</option>
                        <option value="cash-on-delivery">Cash on Delivery</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="notes" class="form-label">Order Notes (Optional)</label>
                    <textarea id="notes" class="form-control form-textarea" rows="2" placeholder="Any special instructions..."></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="modal-btn btn-cancel" onclick="closeCheckout()">
                        <i class="fas fa-times"></i>
                        <span>Cancel</span>
                    </button>
                    <button type="submit" class="modal-btn btn-confirm">
                        <i class="fas fa-check"></i>
                        <span>Place Order (UGX <span id="finalTotal">0</span>)</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal success-modal" id="successModal">
        <div class="modal-content">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3 class="success-title">Order Placed Successfully!</h3>
            <p class="success-message">Thank you for your purchase. Your order has been received and is being processed. We'll contact you shortly for delivery arrangements and agree on transport fee.</p>
            
            <div class="order-details">
                <h4 class="order-details-title">Order Summary</h4>
                <div class="order-details-item">
                    <span class="order-details-label">Order Number:</span>
                    <span class="order-details-value" id="orderNumber">#MB12345</span>
                </div>
                <div class="order-details-item">
                    <span class="order-details-label">Date:</span>
                    <span class="order-details-value" id="orderDate">July 26, 2023</span>
                </div>
                <div class="order-details-item">
                    <span class="order-details-label">Total:</span>
                    <span class="order-details-value text-ugx">UGX <span id="orderTotal">0</span></span>
                </div>
                <div class="order-details-item">
                    <span class="order-details-label">Payment Method:</span>
                    <span class="order-details-value" id="orderPayment">Mobile Money</span>
                </div>
                <div class="order-details-item">
                    <span class="order-details-label">Shipping:</span>
                    <span class="order-details-value" style="color: #28a745;">To be agreed on contact</span>
                </div>
            </div>
            
            <button class="btn-continue" onclick="continueShopping()">
                <i class="fas fa-shopping-bag"></i>
                <span>Continue Shopping</span>
            </button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toastNotification">
        <div class="toast-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="toast-content">
            <div class="toast-title" id="toastTitle">Success</div>
            <div class="toast-message" id="toastMessage">Product added to cart!</div>
        </div>
        <button class="close-toast" onclick="hideToast()">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <script>
        // Banner Animation
        let currentSlide = 0;
        const slides = document.querySelectorAll('.banner-slide');
        const indicators = document.querySelectorAll('.banner-indicator');
        const typingText = document.getElementById('typingText');
        const texts = [
            "MOVIA BOTIQUE - Fashion Collection",
            "Trendy Shoes & Dresses",
            "Stylish T-shirts & Casual Wear",
            "Premium Fashion at Your Doorstep"
        ];
        let textIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        let typingSpeed = 100;

        function typeText() {
            const currentText = texts[textIndex];
            
            if (isDeleting) {
                typingText.textContent = currentText.substring(0, charIndex - 1);
                charIndex--;
                typingSpeed = 50;
            } else {
                typingText.textContent = currentText.substring(0, charIndex + 1);
                charIndex++;
                typingSpeed = 100;
            }
            
            if (!isDeleting && charIndex === currentText.length) {
                isDeleting = true;
                typingSpeed = 1000;
            } else if (isDeleting && charIndex === 0) {
                isDeleting = false;
                textIndex = (textIndex + 1) % texts.length;
                typingSpeed = 500;
            }
            
            setTimeout(typeText, typingSpeed);
        }

        function goToSlide(n) {
            slides[currentSlide].classList.remove('active');
            indicators[currentSlide].classList.remove('active');
            
            currentSlide = n;
            
            slides[currentSlide].classList.add('active');
            indicators[currentSlide].classList.add('active');
        }

        function nextSlide() {
            let next = currentSlide + 1;
            if (next >= slides.length) next = 0;
            goToSlide(next);
        }

        // Start typing animation
        setTimeout(typeText, 1000);
        
        // Auto slide every 7 seconds
        setInterval(nextSlide, 7000);

        // Global variables
        let allProducts = [];
        let filteredProducts = [];
        let cart = [];
        let wishlist = [];
        let isCartOpen = true;

        // Format UGX currency (no decimals)
        function formatUGX(amount) {
            return new Intl.NumberFormat('en-UG').format(Math.round(amount));
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            loadProductsFromFirestore();
            loadCartFromLocalStorage();
            loadWishlistFromLocalStorage();
            
            // Set up scroll listener for minimizing header
            window.addEventListener('scroll', handleScroll);
            
            // For mobile, close cart by default
            if (window.innerWidth <= 1024) {
                toggleCart();
            }
        });

        // Handle scroll to minimize header
        function handleScroll() {
            const desktopHeader = document.getElementById('desktopHeader');
            const mobileHeader = document.getElementById('mobileHeader');
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > 50) {
                desktopHeader.classList.add('minimized');
                mobileHeader.classList.add('minimized');
            } else {
                desktopHeader.classList.remove('minimized');
                mobileHeader.classList.remove('minimized');
            }
        }

        // Mobile search functionality
        function openMobileSearch() {
            document.getElementById('mobileSearchOverlay').classList.add('active');
            document.getElementById('mobileSearchBar').focus();
        }

        function closeMobileSearch() {
            document.getElementById('mobileSearchOverlay').classList.remove('active');
        }

        // Mobile cart functionality
        function openMobileCart() {
            document.getElementById('mobileCartOverlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileCart() {
            document.getElementById('mobileCartOverlay').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Load products from Firestore
        async function loadProductsFromFirestore() {
            try {
                showLoading('#productsGrid', 'Loading fashion products from database...');
                
                const querySnapshot = await window.firestore.getDocs(
                    window.firestore.collection(window.firestore.db, 'products')
                );
                
                allProducts = [];
                querySnapshot.forEach((doc) => {
                    const product = { 
                        id: doc.id, 
                        ...doc.data(),
                        // Convert Firestore timestamps to Date objects if needed
                        createdAt: doc.data().createdAt?.toDate?.() || doc.data().createdAt || new Date()
                    };
                    
                    // Add random badges and discounts for demo (you can remove this if you have real data)
                    const rand = Math.random();
                    if (rand > 0.7 && !product.discountedPrice) {
                        product.badge = 'sale';
                        // Add discount between 10-30%
                        const discountPercent = Math.floor(Math.random() * 21) + 10;
                        product.discountedPrice = Math.round(product.originalPrice * (1 - discountPercent/100));
                    } else if (rand > 0.85 && !product.badge) {
                        product.badge = 'new';
                    } else if (rand > 0.95 && !product.badge) {
                        product.badge = 'limited';
                    }
                    
                    allProducts.push(product);
                });
                
                filteredProducts = [...allProducts];
                displayProducts();
                updateProductsCount();
            } catch (error) {
                console.error('Error loading products:', error);
                showError('#productsGrid', `Error loading products: ${error.message}`);
            }
        }

        // Display products
        function displayProducts() {
            const grid = document.getElementById('productsGrid');
            
            if (filteredProducts.length === 0) {
                grid.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #6c757d;">
                        <i class="fas fa-search" style="font-size: 40px; color: #ced4da; margin-bottom: 15px;"></i>
                        <p>No products found matching your criteria.</p>
                        <button onclick="resetFilters()" style="margin-top: 15px; background: #2E8B57; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                            Reset Filters
                        </button>
                    </div>
                `;
                return;
            }

            grid.innerHTML = filteredProducts.map(product => {
                const hasDiscount = product.discountedPrice && product.discountedPrice < product.originalPrice;
                const discountPercent = hasDiscount ? 
                    Math.round((1 - product.discountedPrice / product.originalPrice) * 100) : 0;
                
                return `
                    <div class="product-card">
                        ${product.badge ? `<span class="product-badge ${product.badge}">${getBadgeText(product.badge)}</span>` : ''}
                        <button class="wishlist-icon ${wishlist.includes(product.id) ? 'active' : ''}" onclick="toggleWishlistItem('${product.id}')">
                            <i class="${wishlist.includes(product.id) ? 'fas' : 'far'} fa-heart"></i>
                        </button>
                        <div class="product-image-container">
                            <img src="${product.image || getPlaceholderImage(product.category)}" alt="${product.name}" class="product-image">
                        </div>
                        <div class="product-info">
                            <h3>${product.name}</h3>
                            <span class="product-category">${product.category}</span>
                            <div class="product-details">
                                <span><i class="fas fa-palette" style="color: #6c757d;"></i> ${product.color}</span>
                                <span><i class="fas fa-ruler-combined" style="color: #6c757d;"></i> ${product.size}</span>
                                <span class="product-stock ${getStockClass(product.stock)}">
                                    <i class="fas ${getStockIcon(product.stock)}" style="margin-right: 4px;"></i>
                                    ${getStockText(product.stock)}
                                </span>
                            </div>
                            <div class="product-price">
                                ${hasDiscount ? `
                                    <span class="original-price text-ugx"><span class="currency-symbol">UGX</span> ${formatUGX(product.originalPrice)}</span>
                                    <span class="current-price text-ugx"><span class="currency-symbol">UGX</span> ${formatUGX(product.discountedPrice)}</span>
                                    <span class="discount-badge">-${discountPercent}%</span>
                                ` : `
                                    <span class="current-price text-ugx"><span class="currency-symbol">UGX</span> ${formatUGX(product.originalPrice)}</span>
                                `}
                            </div>
                            <button class="add-to-cart" onclick="addToCart('${product.id}')" 
                                    ${product.stock <= 0 ? 'disabled' : ''}>
                                <i class="fas fa-cart-plus"></i>
                                ${product.stock <= 0 ? 'Out of Stock' : 'Add to Cart'}
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Get placeholder image based on category
        function getPlaceholderImage(category) {
            const categories = {
                'Shoes': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhjYWE1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzJlOGI1NyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlNob2VzPC90ZXh0Pjwvc3ZnPg==',
                'Dresses': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhjYWE1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzJlOGI1NyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkRyZXNzZXM8L3RleHQ+PC9zdmc+',
                'T-shirts': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhjYWE1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzJlOGI1NyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlQtU2hpcnRzPC90ZXh0Pjwvc3ZnPg==',
                'Casual Wear': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhjYWE1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzJlOGI1NyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkNhc3VhbCBXZWFyPC90ZXh0Pjwvc3ZnPg==',
                'Accessories': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhjYWE1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzJlOGI1NyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkFjY2Vzc29yaWVzPC90ZXh0Pjwvc3ZnPg=='
            };
            return categories[category] || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhjYWE1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzJlOGI1NyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlByb2R1Y3Q8L3RleHQ+PC9zdmc+';
        }

        // Get badge text
        function getBadgeText(badge) {
            const badges = {
                'sale': 'Sale',
                'new': 'New',
                'limited': 'Limited'
            };
            return badges[badge] || '';
        }

        // Get stock class
        function getStockClass(stock) {
            if (stock <= 0) return 'out-of-stock';
            if (stock <= 5) return 'low-stock';
            return 'in-stock';
        }

        // Get stock icon
        function getStockIcon(stock) {
            if (stock <= 0) return 'fa-times-circle';
            if (stock <= 5) return 'fa-exclamation-circle';
            return 'fa-check-circle';
        }

        // Get stock text
        function getStockText(stock) {
            if (stock <= 0) return 'Out of stock';
            if (stock <= 5) return `Only ${stock} left`;
            return 'In stock';
        }

        // Search functionality
        document.getElementById('searchBar').addEventListener('input', function(e) {
            filterProducts();
        });

        // Mobile search functionality
        document.getElementById('mobileSearchBar').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            document.getElementById('searchBar').value = e.target.value;
            filterProducts();
        });

        // Category filter
        document.getElementById('categoryFilter').addEventListener('change', function(e) {
            filterProducts();
        });

        // Sort products
        window.sortProducts = function() {
            const sortValue = document.getElementById('sortFilter').value;
            
            filteredProducts = [...filteredProducts].sort((a, b) => {
                const priceA = a.discountedPrice || a.originalPrice;
                const priceB = b.discountedPrice || b.originalPrice;
                
                switch (sortValue) {
                    case 'price-low':
                        return priceA - priceB;
                    case 'price-high':
                        return priceB - priceA;
                    case 'name-asc':
                        return a.name.localeCompare(b.name);
                    case 'name-desc':
                        return b.name.localeCompare(a.name);
                    case 'newest':
                        return new Date(b.createdAt) - new Date(a.createdAt);
                    default:
                        return 0;
                }
            });
            
            displayProducts();
        };

        // Reset filters
        window.resetFilters = function() {
            document.getElementById('searchBar').value = '';
            document.getElementById('mobileSearchBar').value = '';
            document.getElementById('categoryFilter').value = '';
            document.getElementById('sortFilter').value = 'default';
            filteredProducts = [...allProducts];
            displayProducts();
            updateProductsCount();
        };

        // Filter products based on search and category
        function filterProducts() {
            const searchTerm = document.getElementById('searchBar').value.toLowerCase();
            const selectedCategory = document.getElementById('categoryFilter').value;

            filteredProducts = allProducts.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm) ||
                                    product.category.toLowerCase().includes(searchTerm) ||
                                    product.color.toLowerCase().includes(searchTerm) ||
                                    (product.description && product.description.toLowerCase().includes(searchTerm));
                const matchesCategory = !selectedCategory || product.category === selectedCategory;
                
                return matchesSearch && matchesCategory;
            });

            // Apply current sort
            sortProducts();
            updateProductsCount();
        }

        // Update products count
        function updateProductsCount() {
            const count = filteredProducts.length;
            document.getElementById('productsCount').textContent = 
                `${count} product${count !== 1 ? 's' : ''} found${count === 0 ? '' : '  ' + allProducts.length + ' total'}`;
        }

        // Add to cart
        window.addToCart = function(productId) {
            const product = allProducts.find(p => p.id === productId);
            if (!product || product.stock <= 0) return;

            const price = product.discountedPrice || product.originalPrice;
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                if (existingItem.quantity < product.stock) {
                    existingItem.quantity++;
                } else {
                    showToast('Cannot add more items. Stock limit reached.', 'error');
                    return;
                }
            } else {
                cart.push({
                    id: productId,
                    name: product.name,
                    price: price,
                    image: product.image || getPlaceholderImage(product.category),
                    quantity: 1,
                    maxStock: product.stock
                });
            }

            updateCartDisplay();
            saveCartToLocalStorage();
            showToast('Product added to cart!', 'success');
        };

        // Update cart display
        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            const mobileCartItems = document.getElementById('mobileCartItems');
            const cartCount = document.getElementById('cartCount');
            const mobileCartCount = document.getElementById('mobileCartCount');
            const cartSubtotal = document.getElementById('cartSubtotal');
            const mobileCartSubtotal = document.getElementById('mobileCartSubtotal');
            const cartTotal = document.getElementById('cartTotal');
            const mobileCartTotal = document.getElementById('mobileCartTotal');
            const checkoutBtn = document.getElementById('checkoutBtn');
            const mobileCheckoutBtn = document.getElementById('mobileCheckoutBtn');
            const finalTotal = document.getElementById('finalTotal');

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const total = subtotal;

            cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            mobileCartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartSubtotal.textContent = formatUGX(subtotal);
            mobileCartSubtotal.textContent = formatUGX(subtotal);
            cartTotal.textContent = formatUGX(total);
            mobileCartTotal.textContent = formatUGX(total);
            finalTotal.textContent = formatUGX(total);
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #6c757d;">
                        <i class="fas fa-shopping-cart" style="font-size: 40px; color: #ced4da; margin-bottom: 15px;"></i>
                        <p>Your cart is empty</p>
                        <p style="font-size: 14px; color: #6c757d; margin-top: 10px;">Add some products to get started!</p>
                    </div>
                `;
                mobileCartItems.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #6c757d;">
                        <i class="fas fa-shopping-cart" style="font-size: 40px; color: #ced4da; margin-bottom: 15px;"></i>
                        <p>Your cart is empty</p>
                        <p style="font-size: 14px; color: #6c757d; margin-top: 10px;">Add some products to get started!</p>
                    </div>
                `;
                checkoutBtn.disabled = true;
                mobileCheckoutBtn.disabled = true;
            } else {
                cartItems.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price text-ugx"><span class="currency-symbol">UGX</span> ${formatUGX(item.price)} each</div>
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="updateQuantity('${item.id}', -1)">-</button>
                                <span>${item.quantity}</span>
                                <button class="quantity-btn" onclick="updateQuantity('${item.id}', 1)">+</button>
                                <button class="remove-item" onclick="removeFromCart('${item.id}')">
                                    <i class="fas fa-trash-alt"></i>
                                    <span>Remove</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
                mobileCartItems.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price text-ugx"><span class="currency-symbol">UGX</span> ${formatUGX(item.price)} each</div>
                            <div class="quantity-controls">
                                <button class="quantity-btn" onclick="updateQuantity('${item.id}', -1)">-</button>
                                <span>${item.quantity}</span>
                                <button class="quantity-btn" onclick="updateQuantity('${item.id}', 1)">+</button>
                                <button class="remove-item" onclick="removeFromCart('${item.id}')">
                                    <i class="fas fa-trash-alt"></i>
                                    <span>Remove</span>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
                checkoutBtn.disabled = false;
                mobileCheckoutBtn.disabled = false;
            }
        }

        // Update quantity
        window.updateQuantity = function(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (!item) return;

            const newQuantity = item.quantity + change;
            if (newQuantity <= 0) {
                removeFromCart(productId);
            } else if (newQuantity <= item.maxStock) {
                item.quantity = newQuantity;
                updateCartDisplay();
                saveCartToLocalStorage();
            } else {
                showToast('Cannot add more items. Stock limit reached.', 'error');
            }
        };

        // Remove from cart
        window.removeFromCart = function(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
            saveCartToLocalStorage();
            showToast('Product removed from cart', 'success');
        };

        // Clear cart
        window.clearCart = function() {
            if (cart.length === 0) return;
            if (confirm('Are you sure you want to clear your cart?')) {
                cart = [];
                updateCartDisplay();
                saveCartToLocalStorage();
                showToast('Cart cleared', 'success');
            }
        };

        // Toggle cart visibility (for desktop)
        window.toggleCart = function() {
            const sidebar = document.getElementById('cartSidebar');
            isCartOpen = !isCartOpen;
            
            if (window.innerWidth <= 1024) {
                sidebar.style.display = isCartOpen ? 'block' : 'none';
            }
        };

        // Save cart to localStorage
        function saveCartToLocalStorage() {
            localStorage.setItem('moviaBotiqueCart', JSON.stringify(cart));
        }

        // Load cart from localStorage
        function loadCartFromLocalStorage() {
            const savedCart = localStorage.getItem('moviaBotiqueCart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartDisplay();
            }
        }

        // Toggle wishlist item
        window.toggleWishlistItem = function(productId) {
            const index = wishlist.indexOf(productId);
            if (index === -1) {
                wishlist.push(productId);
                showToast('Added to wishlist', 'success');
            } else {
                wishlist.splice(index, 1);
                showToast('Removed from wishlist', 'info');
            }
            
            updateWishlistDisplay();
            saveWishlistToLocalStorage();
        };

        // Toggle wishlist visibility
        window.toggleWishlist = function() {
            showToast('Wishlist feature coming soon!', 'info');
        };

        // Update wishlist display
        function updateWishlistDisplay() {
            document.getElementById('wishlistCount').textContent = wishlist.length;
            
            // Update heart icons in product cards
            document.querySelectorAll('.wishlist-icon').forEach(icon => {
                const productId = icon.getAttribute('onclick').match(/'([^']+)'/)[1];
                const iconElement = icon.querySelector('i');
                if (wishlist.includes(productId)) {
                    icon.classList.add('active');
                    iconElement.className = 'fas fa-heart';
                } else {
                    icon.classList.remove('active');
                    iconElement.className = 'far fa-heart';
                }
            });
        }

        // Save wishlist to localStorage
        function saveWishlistToLocalStorage() {
            localStorage.setItem('moviaBotiqueWishlist', JSON.stringify(wishlist));
        }

        // Load wishlist from localStorage
        function loadWishlistFromLocalStorage() {
            const savedWishlist = localStorage.getItem('moviaBotiqueWishlist');
            if (savedWishlist) {
                wishlist = JSON.parse(savedWishlist);
                updateWishlistDisplay();
            }
        }

        // Open checkout modal
        window.openCheckout = function() {
            if (cart.length === 0) return;
            
            document.getElementById('finalTotal').textContent = formatUGX(
                cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)
            );
            document.getElementById('checkoutModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Close mobile cart if open
            closeMobileCart();
        };

        // Close checkout modal
        window.closeCheckout = function() {
            document.getElementById('checkoutModal').classList.remove('active');
            document.body.style.overflow = '';
        };

        // Handle checkout form submission
        document.getElementById('checkoutForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const checkoutBtn = e.target.querySelector('button[type="submit"]');
            const originalBtnText = checkoutBtn.innerHTML;
            checkoutBtn.disabled = true;
            checkoutBtn.innerHTML = '<span class="spinner"></span> Processing...';
            
            // Generate order data
            const orderData = {
                customerName: document.getElementById('customerName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                deliveryAddress: document.getElementById('address').value,
                paymentMethod: document.getElementById('paymentMethod').value,
                orderNotes: document.getElementById('notes').value,
                contactInfo: `${document.getElementById('email').value} | ${document.getElementById('phone').value}`,
                products: cart.map(item => ({
                    id: item.id,
                    name: item.name,
                    price: item.price,
                    quantity: item.quantity,
                    subtotal: item.price * item.quantity
                })),
                subtotal: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                shipping: 0,
                totalPrice: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                status: 'Pending',
                orderDate: window.firestore.serverTimestamp(),
                createdAt: window.firestore.serverTimestamp()
            };

            try {
                // Save order to Firestore
                const docRef = await window.firestore.addDoc(
                    window.firestore.collection(window.firestore.db, 'orders'), 
                    orderData
                );
                
                // Generate order number
                const orderNumber = `MB${Math.floor(10000 + Math.random() * 90000)}`;
                
                // Show success modal
                document.getElementById('checkoutModal').classList.remove('active');
                document.getElementById('orderNumber').textContent = `#${orderNumber}`;
                document.getElementById('orderDate').textContent = new Date().toLocaleDateString('en-US', {
                    year: 'numeric', month: 'long', day: 'numeric'
                });
                document.getElementById('orderTotal').textContent = formatUGX(orderData.totalPrice);
                document.getElementById('orderPayment').textContent = orderData.paymentMethod;
                document.getElementById('successModal').classList.add('active');
                
                // Clear cart
                cart = [];
                updateCartDisplay();
                saveCartToLocalStorage();
                
                // Reset form
                document.getElementById('checkoutForm').reset();
            } catch (error) {
                console.error('Error placing order:', error);
                showToast('Error placing order: ' + error.message, 'error');
            } finally {
                checkoutBtn.disabled = false;
                checkoutBtn.innerHTML = originalBtnText;
            }
        });

        // Continue shopping after order
        window.continueShopping = function() {
            document.getElementById('successModal').classList.remove('active');
            document.body.style.overflow = '';
            window.scrollTo(0, 0);
        };

        // Show toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toastNotification');
            const toastTitle = document.getElementById('toastTitle');
            const toastMessage = document.getElementById('toastMessage');
            const toastIcon = toast.querySelector('.toast-icon i');
            
            // Set toast content
            toastTitle.textContent = type.charAt(0).toUpperCase() + type.slice(1);
            toastMessage.textContent = message;
            
            // Set icon based on type
            if (type === 'error') {
                toastIcon.className = 'fas fa-exclamation-circle';
            } else if (type === 'info') {
                toastIcon.className = 'fas fa-info-circle';
            } else {
                toastIcon.className = 'fas fa-check-circle';
            }
            
            // Update toast class
            toast.className = `toast toast-${type}`;
            
            // Show toast
            toast.classList.add('show');
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                toast.classList.remove('show');
            }, 5000);
        }

        // Hide toast manually
        window.hideToast = function() {
            document.getElementById('toastNotification').classList.remove('show');
        };

        // Show loading state
        function showLoading(selector, message) {
            const element = document.querySelector(selector);
            if (element) {
                element.innerHTML = `
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        <p>${message}</p>
                    </div>
                `;
            }
        }

        // Show error state
        function showError(selector, message) {
            const element = document.querySelector(selector);
            if (element) {
                element.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #dc3545;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 24px; margin-bottom: 15px;"></i>
                        <p>${message}</p>
                        <button onclick="loadProductsFromFirestore()" style="margin-top: 15px; background: #2E8B57; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: 600;">
                            Try Again
                        </button>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>